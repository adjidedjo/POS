<%= simple_form_for @sale, :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.error_notification %>
  <% if @sale.errors.any? %>
    <div id="error_explanation">
      <ul>
        <% @sale.errors.full_messages.each do |msg| %>
          <li style="color: red; height: 12px; font-weight: bold"><%= msg %></li><br />
        <% end %>
     </ul>
    </div>
  <% end %>
  <div class="row">
    <%= f.hidden_field :channel_customer_id, value: current_user.channel_customer.id if f.object.new_record? %>
    <div class="col-md-6">
      <%= f.input :sales_promotion_id, collection: @sales_promotion, label_method: :nama, value_method: :id,
        input_html: {style: 'width: 250px'} %>
      <%= error_span(@sale[:sales_promotion_id]) %>
      <%= f.input :no_telepon, input_html: { maxlength: 12, style: 'width: 250px',
          data: {autocomplete_source: pos_ultimate_customers_path},
          value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:no_telepon] : nil) :
              f.object.pos_ultimate_customer.no_telepon)},
          label: 'Nomor Telepon Konsumen' %>
      <%= error_span(@sale[:no_telepon]) %>
      <%= f.input :nama, label: "Nama Konsumen", input_html: {style: 'width: 250px',
         value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:nama] : nil) :
          f.object.pos_ultimate_customer.nama)} %>
     <%= f.input :email, label: "Email Konsumen", input_html: {class: "puc",
         value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:email] : nil) :
             f.object.pos_ultimate_customer.email)} %>
      <%= error_span(@sale[:email]) %>
      <%= f.input :handphone, label: "Handphone Konsumen", input_html: { maxlength: 12, style: 'width: 250px',
        value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:handphone] : nil) :
            f.object.pos_ultimate_customer.handphone)} %>
      <%= error_span(@sale[:handphone]) %>
     <%= f.input :handphone1, label: "Handphone Konsumen", input_html: { maxlength: 12, style: 'width: 250px',
       value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:handphone1] : nil) :
           f.object.pos_ultimate_customer.handphone1)} %>
      <%= error_span(@sale[:handphone1]) %>
    </div>
    <div class="col-md-6">
      <%= f.input :alamat, label: "Alamat Konsumen", as: :text, input_html: {style: 'width: 250px',
        value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:alamat] : nil) : f.object.pos_ultimate_customer.alamat)} %>
      <%= error_span(@sale[:alamat]) %>
      <%= f.input :kota, label: "Kota Konsumen", input_html: {style: 'width: 250px',
        value: (f.object.new_record? ? (params[:sale].present? ? params[:sale][:kota] : nil) : f.object.pos_ultimate_customer.kota)} %>
      <%= error_span(@sale[:kota]) %>
      <%= f.input :so_manual, label: "SO Manual(Tidak Lebih dari 6 Karakter)",
        input_html: {maxlength: 6, style: 'width: 250px', value: params[:sale].present? ? params[:sale][:so_manual] : nil } %>
      <%= error_span(@sale[:so_manual]) %>
      <%= f.input :tanggal_kirim, as: :tanggal, readonly: true, input_html: {style: 'width: 250px'} %>
      <%= error_span(@sale[:tanggal_kirim]) %>
      <%= f.input :keterangan_customer, input_html: {style: 'width: 250px'},
        label: "Keterangan (Untuk Ditampilkan di Invoice)" %>
      <%= error_span(@sale[:keterangan_customer]) %>
    </div>
  </div>
  <hr>
  <% unless @sale.new_record? %>
  <h5>Jika ada perubahan <b>Serial, Kode, Nama, Jumlah & Harga</b>, "remove" barang yang akan diganti dan "add item" baru untuk pengganti barang yang di"remove"</h5>
  <hr>
  <% end %>
  <div id="barnag" class="row form-inline">
    <%= f.fields_for :sale_items, @sale.sale_items, as: 'user_inline', wrapper: :inline_form do |builder| %>
      <%= render "sale_item_fields", :f => builder %>
    <% end %>
    <%= link_to_add_fields "Add Item", f, :sale_items %>
  </div>
  <br />
  <div class="row">
    <div class="col-md-12">
      <div class="row-fluid">
        <span class="cara_bayar" style="display: inline-block">
          <%= f.input :netto, as: :string, :input_html => {class: "nested_inline_form input_value", :style => 'width: 250px'} , readonly: true%>
        </span>
      <span id="span_netto" style="display: inline-block; padding: 36px 0 0 65px; text-indent: -50px; vertical-align: top;" ></span>
      </div>
      <div class="row-fluid">
        <span class="cara_bayar" style="display: inline-block">
          <%= f.input :voucher, as: :string, :input_html => {data: {autonumeric: {mDec: 0}},class: "nested_inline_form input_value", :style => 'width: 250px'} %>
        </span>
      </div>
      <%= f.label :cara_pembayaran, 'Cara Pembayaran (WAJIB DICEKLIS)' %><br />
      <%= check_box_tag 'tipe_pembayaran[]', "Tunai", @sale.new_record? ? (@sale.tipe_pembayaran.nil? ? false : (@sale.tipe_pembayaran.include?("Tunai") ? true : false)) : (f.object.tipe_pembayaran.include?("Tunai") ? true : false) %>Tunai (Ceklis ini jika pembayaran secara TUNAI)
      <div class="row-fluid" style="padding: 10px 10px 10px 50px">
        <span class="cara_bayar" style="display: inline-block">
          <%= f.input :pembayaran, as: :string, label: false, :input_html => {data: {autonumeric: {mDec: 0}},class: "nested_inline_form input_value"} %>
        </span>
      </div>
      <%= check_box_tag 'tipe_pembayaran[]', "Transfer",  @sale.new_record? ? (@sale.tipe_pembayaran.nil? ? false : (@sale.tipe_pembayaran.include?("Transfer") ? true : false)) : (f.object.tipe_pembayaran.include?("Transfer") ? true : false) %>Transfer (Ceklis ini jika pembayaran secara TRANSFER)<br />
      <div class="row" style="padding: 10px 10px 10px 63px">
       <%= f.input :bank_account_id, as: :radio_buttons ,collection: BankAccount.all, label_method: :name, value_method: :id,
              label: false %>
        <span class="cara_bayar" style="display: inline-block">
          <%= f.input :jumlah_transfer, as: :string, input_html: {data: {autonumeric: {mDec: 0}}, class: 'input_value nested_inline_form'}, placeholder: "Jumlah Transfer" %>
        </span>
      </div>
      <%= check_box_tag 'tipe_pembayaran[]', "Debit Card",  @sale.new_record? ? (@sale.tipe_pembayaran.nil? ? false : (@sale.tipe_pembayaran.include?("Debit Card") ? true : false)) : (f.object.tipe_pembayaran.include?("Debit Card") ? true : false) %>Kartu Debit (Ceklis ini jika pembayaran menggunakan KARTU DEBIT)<br />
      <div class="row form-inline" style="padding: 10px 10px 10px 63px">
        <%= f.simple_fields_for :payment_with_debit_cards, wrapper: :inline_form do |builder| %>
          <%= builder.input :nama_kartu, :placeholder => 'Nama Kartu', :input_html => {class: "nested_inline_form"}  %>
          <%= builder.input :no_kartu_debit, :placeholder => 'No Kartu', :input_html => {class: "nested_inline_form"}  %>
          <%= builder.input :atas_nama, :placeholder => 'Atas Nama', :input_html => {class: "nested_inline_form"}  %>
          <span class="cara_bayar" style="display: inline-block">
            <%= builder.input :jumlah, as: :string, placeholder: 'Jumlah', :input_html => {data: {autonumeric: {mDec: 0}}, class: "nested_inline_form input_value"} %>
          </span>
          <br />
        <% end %>
      </div>
      <%= check_box_tag 'tipe_pembayaran[]', "Credit Card",  @sale.new_record? ? (@sale.tipe_pembayaran.nil? ? false : (@sale.tipe_pembayaran.include?("Credit Card") ? true : false)) : (f.object.tipe_pembayaran.include?("Credit Card") ? true : false) %>Kartu Kredit (Ceklis ini jika pembayaran menggunakan KARTU KREDIT)<br />
      <div class="row form-inline" style="padding: 10px 10px 10px 63px">
        <%= f.simple_fields_for :payment_with_credit_cards, as: 'user_inline', wrapper: :inline_form,
          html: { class: 'form-inline' } do |builder| %>
          <% merchant = @merchant.nil? ? [] : @merchant  %>
          <% tenor = @tenor.nil? ? [] : @tenor  %>
          <%= builder.input :no_merchant, collection: merchant, label_method: :nama, value_method: :no_merchant,
            :input_html => {class: "nested_inline_form"}, include_blank: "Pilih Merchant"%>
          <%= builder.input :tenor, collection: tenor, label_method: :tenor, value_method: :mid,
            :input_html => {class: "nested_inline_form"}, include_blank: "Pilih Tenor" %>
          <%= builder.input :no_kartu_kredit, :placeholder => 'No Kartu', :input_html => {class: "nested_inline_form"}  %>
          <%= builder.input :nama_kartu, :placeholder => 'Nama Kartu', :input_html => {class: "nested_inline_form"}  %>
          <%= builder.input :atas_nama, :placeholder => 'Atas Nama', :input_html => {class: "nested_inline_form"}  %>
          <span class="cara_bayar" style="display: inline-block">
            <%= builder.input :jumlah, as: :string, :placeholder => 'Jumlah', :input_html => {data: {autonumeric: {mDec: 0}}, class: "nested_inline_form input_value"}  %>
          </span>
          <br />
        <% end %>
      </div>

      <div class="row-fluid">
        <span class="cara_bayar" style="display: inline-block">
          <%= f.input :sisa, as: :string, :input_html => { class: "nested_inline_form input_value", :style => 'width: 250px;' }, :readonly => true %>
        </span>
        <span id="span_sisa" style="display: inline-block; padding: 36px 0 0 65px; text-indent: -50px; vertical-align: top;"></span>
      </div>

      <div class="col-md-6">
      </div>
    </div>
    <%= f.button :submit, "Buat SO", data: { disable_with: "Harap Tunggu...", confirm: "Apakah anda yakin?" }, :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")), sales_path, :class => 'btn btn-default' %>
  </div>
<% end %>